# 🧹 Project Cleanup & Optimization Report

**Generated:** November 1, 2025  
**Project:** News Trend Analysis

---

## 📊 Executive Summary

Your project is **well-structured** but has some redundant files and configurations. Here's what we can improve:

- **8 files to DELETE** (redundant/unused)
- **5 files to UPDATE** (outdated configs)
- **3 optimizations** (performance/structure)
- **2 refactoring opportunities**

**Estimated cleanup benefit:** ~500KB disk space, cleaner repo, faster builds

---

## 🗑️ FILES TO DELETE

### 1. **`src/scrape_articles_bad.py`** ❌
- **Why:** Obsolete version (replaced by `scrape_articles.py`)
- **Impact:** None - it's not used anywhere
- **Action:** `rm src/scrape_articles_bad.py`

### 2. **`dvc.yaml`** ❌
- **Why:** DVC is not being used (already in `.gitignore`)
- **Impact:** None - GitHub Actions replaced DVC workflow
- **Action:** `rm dvc.yaml`

### 3. **`Procfile`** ❌
- **Why:** Railway uses `railway.json` for deployment config
- **Impact:** None - Procfile is for Heroku, not Railway
- **Action:** `rm Procfile`

### 4. **`test_setup.py`** ❌
- **Why:** Not used, references `sample_news.json` which doesn't exist
- **Impact:** None - manual testing works fine
- **Action:** `rm test_setup.py`

### 5. **`src/evaluate.py`** ❌
- **Why:** MLflow tracking not used (mlflow_tracking/ is 16KB, barely used)
- **Impact:** None - metrics visible in dashboard anyway
- **Action:** `rm src/evaluate.py`

### 6. **`mlflow_tracking/`** directory ❌
- **Why:** MLflow not actively used (16KB empty tracking dir)
- **Impact:** None - remove if not planning to use MLflow
- **Action:** `rm -rf mlflow_tracking/`

### 7. **Local automation scripts** (OPTIONAL) ⚠️
These are only useful for LOCAL scheduling (not needed for cloud deployment):

- `setup_cron.sh` - Cron job setup (replaced by GitHub Actions)
- `setup_systemd.sh` - Systemd timer setup (replaced by GitHub Actions)
- `news-update.service` - Systemd service file
- `news-update.timer` - Systemd timer file
- `daily_update.py` - Local update script (replaced by GitHub Actions workflow)

**If you're ONLY using GitHub Actions + Railway:** Delete these (saves 5 files)  
**If you want local dev option:** Keep them

### 8. **`setup_amd_gpu.sh`** (OPTIONAL) ⚠️
- **Why:** Specific to your local AMD GPU setup
- **Impact:** None on cloud deployment
- **Action:** Keep if you train models locally, delete if GitHub Actions does all processing

---

## 🔧 FILES TO UPDATE

### 1. **`.gitignore`** ✏️
**Problem:** References DVC but you don't use it  
**Fix:** Remove DVC lines:
```diff
- # DVC (not used anymore)
- .dvc/
- dvc.yaml
- dvc.lock
```

Also add MLflow if deleting it:
```diff
+ # MLflow tracking (not used)
+ mlflow_tracking/
```

### 2. **`.railwayignore`** ✏️
Check if it exists and has proper exclusions:
```
.git/
.venv/
__pycache__/
*.pyc
.env
data/
models/
logs/
mlflow_tracking/
tests/
*.md
!README.md
```

### 3. **`requirements.txt`** ✏️
**Current:** Lightweight dashboard deps (good!)  
**Check:** Ensure no unnecessary packages

### 4. **`requirements.full.txt`** ✏️
**Check:** Remove mlflow if not using:
```diff
- mlflow>=2.8.0
```

### 5. **`README.md`** ✏️
**Update:** Remove references to deleted files/tools:
- DVC (if mentioned)
- MLflow (if deleting)
- Local automation scripts (if deleting)

---

## ⚡ OPTIMIZATIONS

### 1. **Data Directory Cleanup** 🗂️
**Current size:** 1.8MB processed + 496KB raw

**Multiple raw JSON files:**
```
data/raw/news_20251030_172408.json
data/raw/news_20251030_174034.json
data/raw/news_20251030_174927.json
data/raw/news_20251031_080803.json
data/raw/articles_scraped.json
```

**Recommendation:**
- Keep only `articles_scraped.json` (consolidated)
- Delete timestamped files after consolidation
- **OR** Keep 1 week of raw files, auto-delete older ones

**Benefit:** Cleaner repo, faster git operations

### 2. **CSV Pipeline Optimization** 📊
**Current:** 4 separate CSV files for each pipeline stage
```
articles.csv                    (raw processed)
articles_with_sentiment.csv     (+ sentiment)
articles_with_topics.csv        (+ topics)
articles_with_summary.csv       (+ summaries)
```

**Issue:** Redundant data - each file contains ALL previous columns

**Options:**
- **A) Keep as-is** (easier debugging, clear pipeline stages) ✅ **RECOMMENDED**
- **B) Consolidate** (single `articles_final.csv`, but harder to debug)

**Current approach is GOOD** - makes debugging easy, disk space negligible

### 3. **Model Storage** 🤖
**Current:** 24KB (BERTopic model files)

**Check:** Are you committing model files to git?
- **YES:** Consider `.gitignore` (models regenerated by pipeline)
- **NO:** Good! Keep models local/generated

---

## 🔨 REFACTORING OPPORTUNITIES

### 1. **`run_pipeline.py` vs `daily_update.py`** 🔄

**Current:**
- `run_pipeline.py` - Full pipeline for local dev
- `daily_update.py` - Automated updates (cron/systemd)

**Issue:** If deleting local automation, `daily_update.py` becomes redundant

**Options:**
- **A) Keep both** (if using local automation)
- **B) Delete `daily_update.py`** (if GitHub Actions only)
- **C) Merge into single script** with `--full` / `--update` flags

### 2. **Environment Configuration** ⚙️

**Current:**
- `.env` (local, gitignored) ✅
- `.env.example` (template) ✅
- Railway env vars ✅
- GitHub Secrets ✅

**Good!** No changes needed.

---

## 📋 RECOMMENDED CLEANUP PLAN

### 🎯 Minimal Cleanup (Safe & Quick)
**DELETE immediately:**
```bash
rm src/scrape_articles_bad.py
rm dvc.yaml
rm Procfile
rm test_setup.py
```

**UPDATE `.gitignore`:**
```bash
# Remove DVC section
# Add mlflow_tracking/ if keeping it ignored
```

**Benefit:** Cleaner repo, no risk

---

### 🚀 Full Cleanup (Cloud-Only Setup)
**If you're ONLY using GitHub Actions + Railway:**

```bash
# Delete unused files
rm src/scrape_articles_bad.py
rm src/evaluate.py
rm dvc.yaml
rm Procfile
rm test_setup.py
rm setup_cron.sh
rm setup_systemd.sh
rm news-update.service
rm news-update.timer
rm daily_update.py
rm -rf mlflow_tracking/

# Keep setup_amd_gpu.sh only if training models locally
rm setup_amd_gpu.sh  # Optional
```

**Update `.gitignore`:**
```bash
# Remove DVC references
# Add mlflow_tracking/ (if deleted)
```

**Update `requirements.full.txt`:**
```bash
# Remove mlflow if deleted src/evaluate.py
```

**Benefit:** Ultra-clean repo focused on cloud deployment

---

### 🛠️ Hybrid Setup (Cloud + Local Dev)
**Keep local automation scripts for testing:**

```bash
# Delete only clearly unused files
rm src/scrape_articles_bad.py
rm dvc.yaml
rm Procfile
rm test_setup.py
rm src/evaluate.py
rm -rf mlflow_tracking/

# KEEP: setup_*.sh, daily_update.py (for local dev)
```

---

## 📊 BEFORE/AFTER

### Current Structure
```
├── src/
│   ├── scrape_articles.py ✅
│   ├── scrape_articles_bad.py ❌ DELETE
│   ├── evaluate.py ❌ DELETE
│   └── ...
├── dvc.yaml ❌ DELETE
├── Procfile ❌ DELETE
├── test_setup.py ❌ DELETE
├── mlflow_tracking/ ❌ DELETE
├── setup_cron.sh ⚠️ OPTIONAL
├── setup_systemd.sh ⚠️ OPTIONAL
├── daily_update.py ⚠️ OPTIONAL
└── ...
```

### After Cleanup (Cloud-Only)
```
├── src/
│   ├── fetch_news.py ✅
│   ├── scrape_articles.py ✅
│   ├── preprocess.py ✅
│   ├── train_sentiment_model.py ✅
│   ├── train_topic_model.py ✅
│   └── summarize.py ✅
├── dashboard/
│   └── streamlit_app.py ✅
├── .github/
│   └── workflows/
│       └── daily-update.yml ✅
├── requirements.txt ✅ (lightweight)
├── requirements.full.txt ✅ (heavy)
├── railway.json ✅
├── run_pipeline.py ✅
└── README.md ✅
```

**Result:** 8-13 fewer files, clearer purpose, easier maintenance

---

## ✅ NEXT STEPS

1. **Choose your cleanup level** (Minimal / Full / Hybrid)
2. **Run commands** from the plan above
3. **Test locally:** `python run_pipeline.py`
4. **Commit changes:** `git add -A && git commit -m "🧹 Project cleanup"`
5. **Push to GitHub:** `git push`
6. **Verify Railway rebuild** works with cleaned structure

---

## 🎯 FINAL RECOMMENDATIONS

### ✅ KEEP (Essential)
- All `src/*.py` scripts (except evaluate.py, scrape_articles_bad.py)
- `dashboard/streamlit_app.py`
- `requirements.txt` + `requirements.full.txt`
- `railway.json`
- `.github/workflows/daily-update.yml`
- `run_pipeline.py`
- `README.md`

### ❌ DELETE (Recommended)
- `src/scrape_articles_bad.py`
- `src/evaluate.py`
- `dvc.yaml`
- `Procfile`
- `test_setup.py`
- `mlflow_tracking/`

### ⚠️ DELETE (If Cloud-Only)
- `setup_cron.sh`
- `setup_systemd.sh`
- `news-update.service`
- `news-update.timer`
- `daily_update.py`
- `setup_amd_gpu.sh`

---

**Want me to execute any of these cleanup plans?** Just say which level! 🚀
